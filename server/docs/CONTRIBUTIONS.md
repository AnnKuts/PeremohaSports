# Team Contributions

## Participant 1: Mariia Khorunzha (aka Impelle)

**Implemented functionality:**

- Designed and implemented full functionality for the **Gym**, **Room**, **ClassType**, and **Attendance** modules, including database schema, routing, controllers, services, and repositories.
- Implemented complete **CRUD operations** for gyms, rooms, class types, and attendances with proper input validation and consistent error handling.
- Implemented a **soft delete mechanism** for both main and linking entities, preserving historical data and ensuring referential integrity.
- Developed a **complex transactional workflow** for room creation together with class type bindings and session configuration within a single database transaction, guaranteeing atomicity and data consistency.
- Implemented multiple **analytical and filtered queries**, including:
  - gym utilization and occupancy analysis based on room capacity and active attendances,
  - room search with filtering by capacity range and gym,
  - gym search by address with pagination and sorting,
  - session capacity conflict detection when updating room capacity,
  - retrieval of class types with usage statistics (memberships, qualifications, sessions).
  - room revenue analysis: calculates revenue generated by each room based on session attendance and class prices,
  - class-type revenue analysis: aggregates revenue for each class type based on the number of sessions and prices associated with memberships.
- Wrote **integration and unit tests** for the **Gym**, **Room**, **ClassType**, and **Attendance** modules, covering both core business logic and edge cases.
- Implemented and configured a **global error handling middleware** with support for custom application-level errors.
- Created reusable **utility modules**, including centralized custom error handling (AppError), Prisma error handling utilities, and asynchronous controller wrappers.
- Partially completed project documentation, including the database schema description (`schema.md`, `README.md`, `APIs.md`).

## Participant 2: Anna Kuts (aka AnnKuts)

- Designed and implemented full functionality for the **Clients**, **Memberships**, and **Payments** modules: database schema, endpoints, routing, controllers, services, repositories, and core business logic.
- Developed complete **CRUD operations** for clients, memberships, and payments, including advanced input validation with Zod schemas and proper error handling.
- Implemented, configured, and documented **authentication and authorization**: registration, login, JWT issuance and verification, password hashing, and email-based flows (confirmation and recovery) via NodeMailer.
- Developed robust **transactional workflows** for both **payments** and **user registration**, ensuring atomic operations and consistent data integrity.
- Configured **Docker** and set up separate environments with `.env` files for both development and testing, enabling streamlined local development and CI workflows.
- Organized and maintained the collaborative **Git workflow**: branch naming strategies, review practices, merge conventions, and general codebase hygiene.
- Developed and maintained **unit and integration tests** (Vitest, Supertest) for clients, memberships, payments, and authentication modules.
- Created and maintained comprehensive **documentation** for requirements, DB structure, and example usage of the modules implemented.
- **Developed analytical SQL queries** for payments, including OLAP queries for payment statistics and advanced business reporting.
- Set up and enforced project-wide, consistent code styling and automatic formatting using **Prettier**.

## Participant 3: Vladyslav Mykhailov (aka taitami)

**Implemented functionality:**

- Designed and implemented full functionality for the **Trainers** and **Sessions** modules, including database schema adaptation, complex routing, controllers, services, and repositories.
- Implemented a robust **Role-Based Access Control (RBAC)** middleware system (`requireAdmin`, `requireTrainerRole`, `requireTrainerOwnerOrAdmin`), ensuring secure resource access where users can only manage their own data unless they hold administrative privileges.
- Implemented complete **CRUD operations** for trainers and class sessions with strict **Zod validation** schemas for request bodies and route parameters.
- Developed a **transactional creation workflow for Trainers**, which simultaneously handles the creation of the trainer entity, their contact data, gym placements, and professional qualifications in a single atomic operation.
- Implemented **deep logical validation for Session creation**, ensuring business rule compliance by verifying:
    - if the selected room supports the specific class type,
    - if the trainer possesses the required qualification for the class type,
    - if the trainer is officially assigned to the gym where the room is located.
- Implemented a **soft delete mechanism** for trainers and sessions, preserving historical data for future analytics and reporting.
- Implemented multiple **analytical and statistical queries**, including:
    - **Top Trainer analysis:** identifies the most productive trainer based on session count over the last month,
    - **Trainer Popularity ranking:** calculates popularity based on the total number of client attendances across all sessions,
    - **Workload Statistics:** provides a detailed breakdown of sessions conducted by a specific trainer, grouped by class type.
- Integrated **JWT-based authentication** extraction into the controller layer to securely bind operations to the currently logged-in user (e.g., ensuring trainers can only create sessions for themselves).


## **Complex analytical queries overview**

For a detailed overview of the complex analytical queries, refer to [Queries Documentation](./docs/queris.md).
